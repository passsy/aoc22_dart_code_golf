main(a,{c,r,w,p,o}){w=r=N('/');var t=[];for(c in a){if(c.endsWith('..')){w=w.p!;}else if(c.contains('\$ cd')){o=w;o.c.add(w=N('${w.n}/${c.substring(5)}',p:o));t.add(w);}else{if(!c.contains('\$')&&!c.contains('dir')){p=c.split(' ');w.c.add(N(p[1],f:int.parse(p[0])));}}}print(t.map((i)=>i.s).where((i)=>i<100000).reduce((a,b)=>a+b));}class N{var n;List<N> c=[];var f;N?p;N(this.n,{this.f,this.p});int get s=>f??c.fold(0,(a,b)=>a+b.s);}